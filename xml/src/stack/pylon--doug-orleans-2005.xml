<game>
    <name>Pylon</name>
    <gamebody>
        <about>
            <author>Doug Orleans</author>
            <date>2005</date>
        </about>
        <players>
            <player value="white" />
            <pieces>
                5 × small
                <piece colour="white" shape="small" />
                5 × medium
                <piece colour="white" shape="medium" />
                5 × large
                <piece colour="white" shape="large" />
            </pieces>
        </players>
        <players>
            <player value="black" />
            <pieces>
                5 × small
                <piece colour="black" shape="small" />
                5 × medium
                <piece colour="black" shape="medium" />
                5 × large
                <piece colour="black" shape="large" />
            </pieces>
        </players>
        <setup>
            <grid rows="5" columns="6" left="edge" right="edge" bottom="edge" top="edge" scale="0.4" />
            5 × 6
            <goToPhase>
                <phaseRef value="1" /> <player value="black" />
            </goToPhase>
        </setup>
        <dl>
            <dlentry>
                <dt><keyword>pylon</keyword></dt>
                <dd>
                    two or more pieces
                    stacked so that no piece is above a smaller piece
                </dd>
            </dlentry>
        </dl>
        <phase>
            <phaseName>
                <phaseRef value="1" />
            </phaseName>
            <p>
                Place one of your pieces in an empty square
            </p>
            <repeat>
                <goToPhase>
                    <phaseRef value="1" /> <player value="white" />
                </goToPhase>
                <goToPhase>
                    <phaseRef value="1" /> <player value="black" />
                </goToPhase>
            </repeat>
        </phase>
        <subphase>
            <phaseName>
                <phaseRef value="1" />
            </phaseName>
            No empty squares
            <goToPhase>
                <phaseRef value="2" /> <player value="black" />
            </goToPhase>
        </subphase>
        <phase>
            <phaseName>
                <phaseRef value="2" />
            </phaseName>
            <p>
                Place the piece or
                <keyword>pylon</keyword>
                in any square on top of the piece or   
                <keyword>pylon</keyword>
                in an
                abutting
                square, to leave a
                <keyword>pylon</keyword>
                in that square
            </p>
            <repeat>
                <goToPhase>
                    <phaseRef value="2" /> <player value="white" />
                </goToPhase>
                <goToPhase>
                    <phaseRef value="2" /> <player value="black" />
                </goToPhase>
            </repeat>
            <example>
                    <grid rows="1" columns="2" id="before">
                        <square x="0" y="0">
                            <stack>
                                <piece colour="black" shape="large" />
                                <piece colour="white" shape="medium" />
                            </stack>
                        </square>
                        <square x="1" y="0">
                            <stack>
                                <piece colour="white" shape="small" />
                            </stack>
                        </square>
                    </grid>
                <legal>
                    <grid rows="1" columns="2">
                        <square x="0" y="0">
                            <stack>
                                <piece colour="black" shape="large" />
                                <piece colour="white" shape="medium" />
                                <piece colour="white" shape="small" />
                            </stack>
                        </square>
                    </grid>
                </legal>
            </example>
            <example>
                <grid use="before"/>
                <illegal>
                    <grid rows="1" columns="2">
                        <square x="1" y="0">
                            <stack>
                                <piece colour="white" shape="small" />
                                <piece colour="black" shape="large" />
                                <piece colour="white" shape="medium" />
                            </stack>
                        </square>
                    </grid>
                </illegal>
                not a <keyword>pylon</keyword>
            </example>
        </phase>
        <subphase>
            <phaseName>
                <phaseRef value="2" />
            </phaseName>
            No legal moves
            <goToPhase>
                <phaseRef value="End" />
                <player value="black" />
                <player value="white" />
            </goToPhase>
        </subphase>
        <phase>
            <phaseName>
                <phaseRef value="End" />
            </phaseName>
            <p>Take all <keyword>pylons</keyword>
               which have one of your pieces on top, and any of your pieces
               which are not in a <keyword>pylon</keyword>
            </p>
            <p>
                Score 1 <keyword>victory point</keyword>
                for each piece you have taken
            </p>
            <example>
            <grid rows="5" columns="6" left="edge" right="edge" bottom="edge" top="edge">
                <square x="4" y="0">
                    <stack>
                        <piece colour="white" shape="large" />
                        <piece colour="white" shape="medium" />
                        <piece colour="black" shape="medium" />
                        <piece colour="black" shape="small" />
                        <piece colour="black" shape="small" />
                    </stack>
                    <callout x="-1" y="0">
                        5
                        <player value="black" />
                    </callout>
                </square>
                <square x="2" y="1">
                    <stack>
                        <piece colour="white" shape="large" />
                        <piece colour="black" shape="large" />
                        <piece colour="black" shape="small" />
                    </stack>
                    <callout x="-1" y="0">
                        3
                        <player value="black" />
                    </callout>
                </square>
                <square x="4" y="1">
                    <stack>
                        <piece colour="black" shape="large" />
                        <piece colour="white" shape="small" />
                    </stack>
                    <callout x="1" y="0">
                        2
                        <player value="white" />
                    </callout>
                </square>
                <square x="1" y="2">
                    <stack>
                        <piece colour="black" shape="large" />
                        <piece colour="white" shape="medium" />
                        <piece colour="white" shape="medium" />
                        <piece colour="white" shape="small" />
                    </stack>
                    <callout x="-1" y="0">
                        4
                        <player value="white" />
                    </callout>
                </square>
                <square x="3" y="3">
                    <stack>
                        <piece colour="black" shape="large" />
                        <piece colour="black" shape="medium" />
                        <piece colour="white" shape="small" />
                        <piece colour="white" shape="small" />
                    </stack>
                    <callout x="-1" y="0">
                        4
                        <player value="white" />
                    </callout>
                </square>
                <square x="4" y="3">
                    <stack>
                        <piece colour="black" shape="large" />
                        <piece colour="white" shape="medium" />
                        <piece colour="white" shape="small" />
                        <piece colour="black" shape="small" />
                    </stack>
                    <callout x="1" y="0">
                        4
                        <player value="black" />
                    </callout>
                </square>
                <square x="1" y="4">
                    <stack>
                        <piece colour="white" shape="large" />
                        <piece colour="white" shape="large" />
                        <piece colour="black" shape="medium" />
                        <piece colour="white" shape="medium" />
                    </stack>
                    <callout x="-1" y="0">
                        4
                        <player value="white" />
                    </callout>
                </square>
                <square x="5" y="4">
                    <stack>
                        <piece colour="white" shape="large" />
                        <piece colour="black" shape="medium" />
                        <piece colour="black" shape="medium" />
                        <piece colour="black" shape="small" />
                    </stack>
                    <callout x="-1" y="0">
                        4
                        <player value="black" />
                    </callout>
                </square>
            </grid>
            <p>
                16 <player value="black" />, 14 <player value="white" />
                <goToPhase>
                    <phaseRef value="Win" />
                    <player value="black" />
                </goToPhase>
            </p>
            </example>
        </phase>
    </gamebody>
</game>
